server {
    listen 80;
    server_name localhost;

    location / {
        root /www;
        index index.html index.htm;
        autoindex on;  # 启用目录索引
    }

    # Brotli 压缩设置
    brotli on;
    brotli_static on;
    brotli_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript application/wasm;

    # 为 .wasm.br 文件设置 Content-Encoding 和 Content-Type
    location ~ \.wasm\.br$ {
        root /www;
        add_header Content-Encoding br;
        add_header Content-Type application/wasm;
    }

    # 为 .wasm 文件设置 Content-Type（未压缩的 WebAssembly 文件）
    location ~ \.wasm$ {
        root /www;
        add_header Content-Type application/wasm;
    }

    # 为 .gz 文件设置 Content-Encoding 响应头（可选）
    location ~ \.gz$ {
        root /www;
        add_header Content-Encoding gzip;
        add_header Content-Type application/javascript;
    }
}
